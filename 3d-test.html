<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Three.js 배경</title>
    <style>
      html, body {
        margin: 0;
        overflow: hidden;
        height: 100%;
      }
      #threejs {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: -1;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/loaders/OBJLoader.js"></script>
  </head>
  <body>
    <div id="threejs"></div>
    <script>
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.getElementById("threejs").appendChild(renderer.domElement);

      const scene = new THREE.Scene();
      renderer.setClearColor(new THREE.Color(0, 0, 0), 0);

      const isMobile = window.innerWidth <= 768;
      const camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 0, isMobile ? 600 : 400);
      camera.lookAt(0, 0, 0);

      const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
      scene.add(ambientLight);

      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
      directionalLight.position.set(5, 10, 7.5);
      scene.add(directionalLight);

      const loader = new THREE.OBJLoader();
      loader.load(
        'https://raw.githubusercontent.com/cionkore/1/refs/heads/main/module-1.obj',
        function (object) {
          object.scale.set(0.03, 0.03, 0.03);

          const box = new THREE.Box3().setFromObject(object);
          const center = box.getCenter(new THREE.Vector3());
          object.position.sub(center);

          object.traverse(child => {
            if (child.isMesh) {
              child.material = new THREE.MeshStandardMaterial({
                color: new THREE.Color(0.078, 0, 1),
                transparent: true,
                opacity: 0.3,
                side: THREE.DoubleSide,
                depthWrite: false
              });

              const edges = new THREE.EdgesGeometry(child.geometry, 1);
              const line = new THREE.LineSegments(
                edges,
                new THREE.LineBasicMaterial({
                  color: '#1400ff',
                  linewidth: 1,
                  depthTest: false,
                  transparent: true,
                  opacity: 0.7
                })
              );
              child.add(line);
            }
          });

          const pivot = new THREE.Group();
          pivot.add(object);
          scene.add(pivot);
          scene.userData.pivot = pivot;
        }
      );

      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.position.z = window.innerWidth <= 768 ? 600 : 400;
      });

      function animate() {
        requestAnimationFrame(animate);
        const pivot = scene.userData.pivot;
        if (pivot) pivot.rotation.y += 0.0025;
        renderer.render(scene, camera);
      }

      animate();
    </script>
  </body>
</html>
